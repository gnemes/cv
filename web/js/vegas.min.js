
/*!-----------------------------------------------------------------------------
 * Vegas - Fullscreen Backgrounds and Slideshows.
 * v2.1.3 - built 2015-04-28
 * Licensed under the MIT License.
 * http://vegas.jaysalvat.com/
 * ----------------------------------------------------------------------------
 * Copyright (C) 2010-2015 Jay Salvat
 * http://jaysalvat.com/
 * --------------------------------------------------------------------------*/
(function(c){var d={slide:0,delay:5000,preload:false,preloadImage:false,preloadVideo:false,timer:true,overlay:false,autoplay:true,shuffle:false,cover:true,color:null,align:"center",valign:"center",transition:"fade",transitionDuration:1000,transitionRegister:[],animation:null,animationDuration:"auto",animationRegister:[],init:function(){},play:function(){},pause:function(){},walk:function(){},slides:[]};var b={};var a=function(f,e){this.elmt=f;this.settings=c.extend({},d,c.vegas.defaults,e);this.slide=this.settings.slide;this.total=this.settings.slides.length;this.noshow=this.total<2;this.paused=!this.settings.autoplay||this.noshow;this.$elmt=c(f);this.$timer=null;this.$overlay=null;this.$slide=null;this.timeout=null;this.transitions=["fade","fade2","blur","blur2","flash","flash2","negative","negative2","burn","burn2","slideLeft","slideLeft2","slideRight","slideRight2","slideUp","slideUp2","slideDown","slideDown2","zoomIn","zoomIn2","zoomOut","zoomOut2","swirlLeft","swirlLeft2","swirlRight","swirlRight2"];this.animations=["kenburns","kenburnsLeft","kenburnsRight","kenburnsUp","kenburnsUpLeft","kenburnsUpRight","kenburnsDown","kenburnsDownLeft","kenburnsDownRight"];if(this.settings.transitionRegister instanceof Array===false){this.settings.transitionRegister=[this.settings.transitionRegister]}if(this.settings.animationRegister instanceof Array===false){this.settings.animationRegister=[this.settings.animationRegister]}this.transitions=this.transitions.concat(this.settings.transitionRegister);this.animations=this.animations.concat(this.settings.animationRegister);this.support={objectFit:"objectFit" in document.body.style,transition:"transition" in document.body.style||"WebkitTransition" in document.body.style,video:c.vegas.isVideoCompatible()};if(this.settings.shuffle===true){this.shuffle()}this._init()};a.prototype={_init:function(){var j,e,i,f=this.elmt.tagName==="BODY",k=this.settings.timer,h=this.settings.overlay,g=this;this._preload();if(!f){this.$elmt.css("height",this.$elmt.css("height"));j=c('<div class="vegas-wrapper">').css("overflow",this.$elmt.css("overflow")).css("padding",this.$elmt.css("padding"));if(!this.$elmt.css("padding")){j.css("padding-top",this.$elmt.css("padding-top")).css("padding-bottom",this.$elmt.css("padding-bottom")).css("padding-left",this.$elmt.css("padding-left")).css("padding-right",this.$elmt.css("padding-right"))}this.$elmt.clone(true).children().appendTo(j);this.elmt.innerHTML=""}if(k&&this.support.transition){i=c('<div class="vegas-timer"><div class="vegas-timer-progress">');this.$timer=i;this.$elmt.prepend(i)}if(h){e=c('<div class="vegas-overlay">');if(typeof h==="string"){e.css("background-image","url("+h+")")}this.$overlay=e;this.$elmt.prepend(e)}this.$elmt.addClass("vegas-container");if(!f){this.$elmt.append(j)}setTimeout(function(){g.trigger("init");g._goto(g.slide);if(g.settings.autoplay){g.trigger("play")}},1)},_preload:function(){var g,e,f;for(f=0;f<this.settings.slides.length;f++){if(this.settings.preload||this.settings.preloadImages){if(this.settings.slides[f].src){e=new Image();e.src=this.settings.slides[f].src}}if(this.settings.preload||this.settings.preloadVideos){if(this.support.video&&this.settings.slides[f].video){if(this.settings.slides[f].video instanceof Array){g=this._video(this.settings.slides[f].video)}else{g=this._video(this.settings.slides[f].video.src)}}}}},_random:function(e){return e[Math.floor(Math.random()*(e.length-1))]},_slideShow:function(){var e=this;if(this.total>1&&!this.paused&&!this.noshow){this.timeout=setTimeout(function(){e.next()},this._options("delay"))}},_timer:function(f){var e=this;clearTimeout(this.timeout);if(!this.$timer){return}this.$timer.removeClass("vegas-timer-running").find("div").css("transition-duration","0ms");if(this.paused||this.noshow){return}if(f){setTimeout(function(){e.$timer.addClass("vegas-timer-running").find("div").css("transition-duration",e._options("delay")-100+"ms")},100)}},_video:function(g){var e,f,h=g.toString();if(b[h]){return b[h]}if(g instanceof Array===false){g=[g]}e=document.createElement("video");e.preload=true;g.forEach(function(i){f=document.createElement("source");f.src=i;e.appendChild(f)});b[h]=e;return e},_fadeOutSound:function(h,i){var e=this,f=i/10,g=h.volume-0.09;if(g>0){h.volume=g;setTimeout(function(){e._fadeOutSound(h,i)},f)}else{h.pause()}},_fadeInSound:function(h,i){var e=this,f=i/10,g=h.volume+0.09;if(g<1){h.volume=g;setTimeout(function(){e._fadeInSound(h,i)},f)}},_options:function(f,e){if(e===undefined){e=this.slide}if(this.settings.slides[e][f]!==undefined){return this.settings.slides[e][f]}return this.settings[f]},_goto:function(g){if(typeof this.settings.slides[g]==="undefined"){g=0}this.slide=g;var l,j,h,r=this.$elmt.children(".vegas-slide"),f=this.settings.slides[g].src,t=this.settings.slides[g].video,w=this._options("delay"),o=this._options("align"),e=this._options("valign"),n=this._options("color")||this.$elmt.css("background-color"),u=this._options("cover")?"cover":"contain",k=this,x=r.length,p,y;var s=this._options("transition"),i=this._options("transitionDuration"),q=this._options("animation"),v=this._options("animationDuration");if(s==="random"||s instanceof Array){if(s instanceof Array){s=this._random(s)}else{s=this._random(this.transitions)}}if(q==="random"||q instanceof Array){if(q instanceof Array){q=this._random(q)}else{q=this._random(this.animations)}}if(i==="auto"||i>w){i=w}if(v==="auto"){v=w}l=c('<div class="vegas-slide"></div>');if(this.support.transition&&s){l.addClass("vegas-transition-"+s)}if(this.support.video&&t){if(t instanceof Array){p=this._video(t)}else{p=this._video(t.src)}p.loop=t.loop!==undefined?t.loop:true;p.muted=t.mute!==undefined?t.mute:true;if(p.muted===false){p.volume=0;this._fadeInSound(p,i)}else{p.pause()}h=c(p).addClass("vegas-video").css("background-color",n);if(this.support.objectFit){h.css("object-position",o+" "+e).css("object-fit",u).css("width","100%").css("height","100%")}else{if(u==="contain"){h.css("width","100%").css("height","100%")}}l.append(h)}else{y=new Image();j=c('<div class="vegas-slide-inner"></div>').css("background-image","url("+f+")").css("background-color",n).css("background-position",o+" "+e).css("background-size",u);if(this.support.transition&&q){j.addClass("vegas-animation-"+q).css("animation-duration",v+"ms")}l.append(j)}if(!this.support.transition){l.css("display","none")}if(x){r.eq(x-1).after(l)}else{this.$elmt.prepend(l)}k._timer(false);function m(){k._timer(true);setTimeout(function(){if(s){if(k.support.transition){r.css("transition","all "+i+"ms").addClass("vegas-transition-"+s+"-out");r.each(function(){var A=r.find("video").get(0);if(A){A.volume=1;k._fadeOutSound(A,i)}});l.css("transition","all "+i+"ms").addClass("vegas-transition-"+s+"-in")}else{l.fadeIn(i)}}for(var z=0;z<r.length-4;z++){r.eq(z).remove()}k.trigger("walk");k._slideShow()},100)}if(p){if(p.readyState===4){p.currentTime=0}p.play();m()}else{y.src=f;y.onload=m}},shuffle:function(){var e,g;for(var f=this.total-1;f>0;f--){g=Math.floor(Math.random()*(f+1));e=this.settings.slides[f];this.settings.slides[f]=this.settings.slides[g];this.settings.slides[g]=e}},play:function(){if(this.paused){this.paused=false;this.next();this.trigger("play")}},pause:function(){this._timer(false);this.paused=true;this.trigger("pause")},toggle:function(){if(this.paused){this.play()}else{this.pause()}},playing:function(){return !this.paused&&!this.noshow},current:function(e){if(e){return{slide:this.slide,data:this.settings.slides[this.slide]}}return this.slide},jump:function(e){if(e<0||e>this.total-1||e===this.slide){return}this.slide=e;this._goto(this.slide)},next:function(){this.slide++;if(this.slide>=this.total){this.slide=0}this._goto(this.slide)},previous:function(){this.slide--;if(this.slide<0){this.slide=this.total-1}this._goto(this.slide)},trigger:function(e){var f=[];if(e==="init"){f=[this.settings]}else{f=[this.slide,this.settings.slides[this.slide]]}this.$elmt.trigger("vegas"+e,f);if(typeof this.settings[e]==="function"){this.settings[e].apply(this.$elmt,f)}},options:function(f,g){var e=this.settings.slides.slice();if(typeof f==="object"){this.settings=c.extend({},d,c.vegas.defaults,f)}else{if(typeof f==="string"){if(g===undefined){return this.settings[f]}this.settings[f]=g}else{return this.settings}}if(this.settings.slides!==e){this.total=this.settings.slides.length;this.noshow=this.total<2;this._preload()}},destroy:function(){clearTimeout(this.timeout);this.$elmt.removeClass("vegas-container");this.$elmt.find("> .vegas-slide").remove();this.$elmt.find("> .vegas-wrapper").clone(true).children().appendTo(this.$elmt);this.$elmt.find("> .vegas-wrapper").remove();if(this.settings.timer){this.$timer.remove()}if(this.settings.overlay){this.$overlay.remove()}this.elmt._vegas=null}};c.fn.vegas=function(g){var f=arguments,e=false,h;if(g===undefined||typeof g==="object"){return this.each(function(){if(!this._vegas){this._vegas=new a(this,g)}})}else{if(typeof g==="string"){this.each(function(){var i=this._vegas;if(!i){throw new Error("No Vegas applied to this element.")}if(typeof i[g]==="function"&&g[0]!=="_"){h=i[g].apply(i,[].slice.call(f,1))}else{e=true}});if(e){throw new Error('No method "'+g+'" in Vegas.')}return h!==undefined?h:this}}};c.vegas={};c.vegas.defaults=d;c.vegas.isVideoCompatible=function(){return !/(Android|webOS|Phone|iPad|iPod|BlackBerry|Windows Phone)/i.test(navigator.userAgent)}})(window.jQuery||window.Zepto);